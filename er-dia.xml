<mxfile host="app.diagrams.net">
  <diagram name="ER-Диаграмма БД 'Домашняя библиотека'" id="RZPy7LJ9Z-LHqu28oYYm">
    <mxGraphModel dx="1462" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- ЗАГОЛОВОК -->
        <mxCell id="title" value="&lt;b&gt;ER-ДИАГРАММА БАЗЫ ДАННЫХ&lt;/b&gt;&lt;br&gt;&lt;font style='font-size:12px'&gt;«Домашняя библиотека»&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="300" y="20" width="250" height="40" as="geometry" />
        </mxCell>
        
        <!-- ============ СПРАВОЧНЫЕ ТАБЛИЦЫ ============ -->
        
        <!-- AGE_RATINGS -->
        <mxCell id="age_ratings" value="&lt;table border='1' cellspacing='0' cellpadding='4' style='border-collapse:collapse'&gt;&lt;tr&gt;&lt;td colspan='2' bgcolor='#dae8fc' align='center'&gt;&lt;b&gt;AGE_RATINGS&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;PK&lt;/td&gt;&lt;td&gt;id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;code&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;min_age&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;description&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;" style="shape=table;html=1;rounded=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="50" y="80" width="120" height="110" as="geometry" />
        </mxCell>
        
        <!-- GENRES -->
        <mxCell id="genres" value="&lt;table border='1' cellspacing='0' cellpadding='4' style='border-collapse:collapse'&gt;&lt;tr&gt;&lt;td colspan='2' bgcolor='#dae8fc' align='center'&gt;&lt;b&gt;GENRES&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;PK&lt;/td&gt;&lt;td&gt;id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;name&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;description&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;" style="shape=table;html=1;rounded=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="50" y="210" width="120" height="90" as="geometry" />
        </mxCell>
        
        <!-- LOCATIONS -->
        <mxCell id="locations" value="&lt;table border='1' cellspacing='0' cellpadding='4' style='border-collapse:collapse'&gt;&lt;tr&gt;&lt;td colspan='2' bgcolor='#dae8fc' align='center'&gt;&lt;b&gt;LOCATIONS&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;PK&lt;/td&gt;&lt;td&gt;id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;room&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;furniture&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;shelf&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;description&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;" style="shape=table;html=1;rounded=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="50" y="320" width="120" height="120" as="geometry" />
        </mxCell>
        
        <!-- ============ ОСНОВНЫЕ ТАБЛИЦЫ ============ -->
        
        <!-- BOOKS -->
        <mxCell id="books" value="&lt;table border='1' cellspacing='0' cellpadding='4' style='border-collapse:collapse'&gt;&lt;tr&gt;&lt;td colspan='2' bgcolor='#d5e8d4' align='center'&gt;&lt;b&gt;BOOKS&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;PK&lt;/td&gt;&lt;td&gt;id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;title&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;publication_year&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;publisher&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;FK&lt;/td&gt;&lt;td&gt;age_rating_id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;isbn&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;created_at&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;" style="shape=table;html=1;rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="220" y="80" width="130" height="140" as="geometry" />
        </mxCell>
        
        <!-- AUTHORS -->
        <mxCell id="authors" value="&lt;table border='1' cellspacing='0' cellpadding='4' style='border-collapse:collapse'&gt;&lt;tr&gt;&lt;td colspan='2' bgcolor='#d5e8d4' align='center'&gt;&lt;b&gt;AUTHORS&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;PK&lt;/td&gt;&lt;td&gt;id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;last_name&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;first_name&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;birth_year&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;country&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;special_notes&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;" style="shape=table;html=1;rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="220" y="240" width="130" height="120" as="geometry" />
        </mxCell>
        
        <!-- USERS -->
        <mxCell id="users" value="&lt;table border='1' cellspacing='0' cellpadding='4' style='border-collapse:collapse'&gt;&lt;tr&gt;&lt;td colspan='2' bgcolor='#d5e8d4' align='center'&gt;&lt;b&gt;USERS&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;PK&lt;/td&gt;&lt;td&gt;id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;last_name&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;first_name&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;birth_date&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;email&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;role&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;" style="shape=table;html=1;rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="220" y="380" width="130" height="120" as="geometry" />
        </mxCell>
        
        <!-- COPIES -->
        <mxCell id="copies" value="&lt;table border='1' cellspacing='0' cellpadding='4' style='border-collapse:collapse'&gt;&lt;tr&gt;&lt;td colspan='2' bgcolor='#d5e8d4' align='center'&gt;&lt;b&gt;COPIES&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;PK&lt;/td&gt;&lt;td&gt;id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;FK&lt;/td&gt;&lt;td&gt;book_id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;inventory_number&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;FK&lt;/td&gt;&lt;td&gt;location_id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;condition&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;is_available&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;" style="shape=table;html=1;rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="220" y="520" width="130" height="120" as="geometry" />
        </mxCell>
        
        <!-- ============ СВЯЗУЮЩИЕ ТАБЛИЦЫ ============ -->
        
        <!-- BOOK_AUTHORS -->
        <mxCell id="book_authors" value="&lt;table border='1' cellspacing='0' cellpadding='4' style='border-collapse:collapse'&gt;&lt;tr&gt;&lt;td colspan='2' bgcolor='#fff2cc' align='center'&gt;&lt;b&gt;BOOK_AUTHORS&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;PK&lt;/td&gt;&lt;td&gt;id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;FK&lt;/td&gt;&lt;td&gt;book_id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;FK&lt;/td&gt;&lt;td&gt;author_id&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;" style="shape=table;html=1;rounded=0;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="400" y="120" width="130" height="80" as="geometry" />
        </mxCell>
        
        <!-- BOOK_GENRES -->
        <mxCell id="book_genres" value="&lt;table border='1' cellspacing='0' cellpadding='4' style='border-collapse:collapse'&gt;&lt;tr&gt;&lt;td colspan='2' bgcolor='#fff2cc' align='center'&gt;&lt;b&gt;BOOK_GENRES&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;PK&lt;/td&gt;&lt;td&gt;id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;FK&lt;/td&gt;&lt;td&gt;book_id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;FK&lt;/td&gt;&lt;td&gt;genre_id&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;" style="shape=table;html=1;rounded=0;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="400" y="220" width="130" height="80" as="geometry" />
        </mxCell>
        
        <!-- ============ ОПЕРАЦИОННЫЕ ТАБЛИЦЫ ============ -->
        
        <!-- LOANS -->
        <mxCell id="loans" value="&lt;table border='1' cellspacing='0' cellpadding='4' style='border-collapse:collapse'&gt;&lt;tr&gt;&lt;td colspan='2' bgcolor='#f8cecc' align='center'&gt;&lt;b&gt;LOANS&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;PK&lt;/td&gt;&lt;td&gt;id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;FK&lt;/td&gt;&lt;td&gt;copy_id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;FK&lt;/td&gt;&lt;td&gt;user_id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;FK&lt;/td&gt;&lt;td&gt;librarian_id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;loan_date&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;due_date&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;age_check_passed&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;" style="shape=table;html=1;rounded=0;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="400" y="320" width="130" height="120" as="geometry" />
        </mxCell>
        
        <!-- ============ СВЯЗИ МЕЖДУ ТАБЛИЦАМИ ============ -->
        
        <!-- Связь: BOOKS → AGE_RATINGS (N:1) -->
        <mxCell id="link1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.4;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="books" target="age_ratings">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="link1_label" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="link1">
          <mxGeometry x="-0.3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="link1_label2" value="1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="link1">
          <mxGeometry x="1.3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- Связь: BOOKS → BOOK_AUTHORS (1:N) -->
        <mxCell id="link2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="books" target="book_authors">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="link2_label" value="1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="link2">
          <mxGeometry x="-0.3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="link2_label2" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="link2">
          <mxGeometry x="1.3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- Связь: BOOK_AUTHORS → AUTHORS (N:1) -->
        <mxCell id="link3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="book_authors" target="authors">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="link3_label" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="link3">
          <mxGeometry x="-0.3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="link3_label2" value="1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="link3">
          <mxGeometry x="1.3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- Связь: BOOKS → BOOK_GENRES (1:N) -->
        <mxCell id="link4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.7;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="books" target="book_genres">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Связь: BOOK_GENRES → GENRES (N:1) -->
        <mxCell id="link5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="book_genres" target="genres">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Связь: BOOKS → COPIES (1:N) -->
        <mxCell id="link6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="books" target="copies">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="link6_label" value="1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="link6">
          <mxGeometry x="0.5" y="-0.4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="link6_label2" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="link6">
          <mxGeometry x="0.5" y="1.4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- Связь: COPIES → LOCATIONS (N:1) -->
        <mxCell id="link7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="copies" target="locations">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="190" y="580" />
              <mxPoint x="190" y="380" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="link7_label" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="link7">
          <mxGeometry x="-0.3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="link7_label2" value="1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="link7">
          <mxGeometry x="1.3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- Связь: COPIES → LOANS (1:N) -->
        <mxCell id="link8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.3;entryDx=0;entryDy=0;" edge="1" parent="1" source="copies" target="loans">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="link8_label" value="1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="link8">
          <mxGeometry x="-0.3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="link8_label2" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="link8">
          <mxGeometry x="1.3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- Связь: USERS → LOANS (1:N) -->
        <mxCell id="link9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.7;entryDx=0;entryDy=0;" edge="1" parent="1" source="users" target="loans">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="link9_label" value="1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="link9">
          <mxGeometry x="-0.3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="link9_label2" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="link9">
          <mxGeometry x="1.3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- Связь: USERS → LOANS (librarian_id) N:1 -->
        <mxCell id="link10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.7;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="loans" target="users">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="465" y="320" />
              <mxPoint x="465" y="350" />
              <mxPoint x="285" y="350" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="link10_label" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="link10">
          <mxGeometry x="0.1" y="-0.2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="link10_label2" value="1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="link10">
          <mxGeometry x="0.9" y="1.2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- ЛЕГЕНДА -->
        <mxCell id="legend" value="&lt;table border='1' cellspacing='0' cellpadding='4' style='border-collapse:collapse;font-size:10px'&gt;&lt;tr&gt;&lt;td colspan='2' align='center'&gt;&lt;b&gt;УСЛОВНЫЕ ОБОЗНАЧЕНИЯ&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;PK&lt;/td&gt;&lt;td&gt;Первичный ключ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;FK&lt;/td&gt;&lt;td&gt;Внешний ключ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td bgcolor='#dae8fc'&gt;&lt;/td&gt;&lt;td&gt;Справочные таблицы&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td bgcolor='#d5e8d4'&gt;&lt;/td&gt;&lt;td&gt;Основные таблицы&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td bgcolor='#fff2cc'&gt;&lt;/td&gt;&lt;td&gt;Связующие таблицы&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td bgcolor='#f8cecc'&gt;&lt;/td&gt;&lt;td&gt;Операционные таблицы&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;один (обязательно)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;N&lt;/td&gt;&lt;td&gt;много (0..N)&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;" style="shape=table;html=1;rounded=0;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="570" y="80" width="150" height="200" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
